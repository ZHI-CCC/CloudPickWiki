---
title: 公共属性
date: 2099-03-05 21:25:02
permalink: /ui/公共属性
categories:
  - UI界面
tags:
  - UI界面
---
# 公共属性

> 所有UI控件共享的基础属性参考手册

⚠️ **阅读前提示**  
请确保已阅读 **[结构详解 | 新手教程]** 中的基础概念。

## 一、基础标识属性

这些属性用于定义控件的核心身份和类型。

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `type` | String | - | 控件的类型，例如 `Grid`。这等同于在布局中使用 `!Grid` 的声明方式。 |
| `name` | String | - | **【重要】** 控件的唯一名称。在脚本中可以通过此名称来访问和操作该控件。例如：`面板.visibility = 'Hidden'`。 |
| `identifier` | String | - | 控件标识符。通常在需要唯一标识的场景下使用，如物品槽位。 |
| `id` | int | - | 设置控件的数字ID。 |

## 二、布局与尺寸属性

控制控件大小和在父容器中的位置。**所有数值均为整数（int）**。

### 2.1 尺寸设置

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `width` | int | NaN | 设置控件的宽度。 |
| `height` | int | NaN | 设置控件的高度。 |
| `size` | int | - | 同时将控件的宽度和高度设置为相同的值。 |
| `minWidth` | int | - | 控件的最小宽度。当控件使用Stretch对齐时，此属性可防止它过小。 |
| `minHeight` | int | - | 控件的最小高度。 |

### 2.2 对齐方式（九点定位法）

| 属性 | 可选值 | 默认值 | 说明 |
|------|--------|--------|------|
| `horizontalAlign` | `Left`, `Center`, `Right`, `Stretch` | - | **水平对齐**。定义控件在父容器内的水平方向定位基准点。Stretch表示宽度将填满父容器。 |
| `verticalAlign` | `Top`, `Center`, `Bottom`, `Stretch` | - | **垂直对齐**。定义控件在父容器内的垂直方向定位基准点。Stretch表示高度将填满父容器。 |

### 2.3 边距与内边距

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `margin` | String | - | **外边距**。一次性设置四个方向的外边距，格式为 `"上, 右, 下, 左"`（例如：`"10, 20, 10, 20"`）。**内部数值为整数**。 |
| `marginLeft` | int | - | 单独设置左边距。 |
| `marginTop` | int | - | 单独设置上边距。 |
| `marginRight` | int | - | 单独设置右边距。 |
| `marginBottom` | int | - | 单独设置下边距。 |
| `padding` | String | - | **内边距**。一次性设置四个方向的内边距，格式同 `margin`。**内部数值为整数**。内边距是控件内容与自身边缘的距离。 |
| `paddingLeft` | int | - | 单独设置左侧内边距。 |
| `paddingTop` | int | - | 单独设置顶部内边距。 |
| `paddingRight` | int | - | 单独设置右侧内边距。 |
| `paddingBottom` | int | - | 单独设置底部内边距。 |

### 2.4 绝对布局精确位置

> **警告：没有特殊需求不要使用！！！**

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `x` / `y` | int | - | 在父容器内进行偏移的坐标。 |
| `absX` / `absY` | int | - | 在 `Canvas` 类型的容器中，设置相对于容器原点的**绝对坐标**。 |

## 三、外观与样式属性

控制控件的视觉表现。

### 3.1 颜色与透明度

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `background` | String/int | - | 设置背景，支持texture中的资源，也支持颜色名称（如 `red`）或十六进制数值（如 `0x80000000` 表示50%透明的黑色） |
| `foreground` | String/int | - | 设置前景，和背景相同。 |
| `opacity` | Number | 1 | 设置控件的整体不透明度。范围从 `0.0`（完全透明）到 `1.0`（完全不透明）。 |

### 3.2 变换效果（Transform）

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `scale` / `scaleX` / `scaleY` | Number | 1 | 缩放比例。`scale` 同时设置X和Y轴缩放；`scaleX` 和 `scaleY` 可分别设置。 |
| `scaleFactor` | int | - | **【特殊】** 控制控件的缩放模式。`-1`：随游戏界面比例缩放（自适应）；`-2`：随系统缩放比例；`-3`：不缩放；正数：强制缩放比例；`-6`：像素UI专用模式 |
| `rotateX` / `rotateY` / `rotateZ` | int | - | 围绕X、Y、Z轴旋转的角度（单位：度）。 |
| `skew` / `skewX` / `skewY` | int | - | 设置X、Y轴上的倾斜角度（单位：度）。 |
| `translateX` / `translateY` / `translateZ` | int | - | 在X、Y、Z轴上的平移距离。 |
| `pivot` / `pivotX` / `pivotY` | Number | - | **变换轴心点**。所有变换（旋转、缩放等）的基准点。取值范围通常为0到1（代表百分比），例如 `pivotX: 0.5, pivotY: 0.5` 表示以控件中心为轴心。 |

### 3.3 层级与可见性

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `zIndex` | int | - | **显示层级**。数值越大，控件显示在越上层，可能会遮盖zIndex值小的控件。 |
| `visibility` | String | Visible | 控件的可见性。`Visible`：可见；`Hidden`：不可见，但**仍占据布局空间**；`Collapsed`：不可见，且**不占据布局空间**。 |

## 四、交互行为属性

控制控件如何与用户互动。

### 4.1 可交互性开关

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `enable` | Boolean | true | 控件是否处于启用状态。禁用后通常无法交互。 |
| `clickable` | Boolean | false | 控件是否可以接收并响应点击事件。 |
| `longClickable` | Boolean | false | 控件是否可以接收并响应长按事件。 |
| `focusable` | Boolean | false | 控件是否可以获得焦点（例如，输入框需要此属性）。 |

### 4.2 拖拽功能

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `draggable` | Boolean | false | 设置控件是否可以被鼠标拖拽。 |
| `dragRect` | String | - | 设置一个矩形区域来限制拖拽范围，格式为 `"x, y, width, height"`。**坐标和尺寸均为整数**。 |

### 4.3 声音反馈

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `clickSound` | String | - | 控件被点击时播放的音效文件路径（如 `click.ogg`）。 |
| `hoverSound` | String | - | 鼠标悬停在控件上时播放的音效文件路径。 |

## 五、内容与高级功能属性

### 5.1 脚本与事件

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `script` | String | - | 定义该控件自身的JavaScript脚本逻辑。 |
| `events` | Array | - | **【核心】** 定义控件的事件触发器列表，如 `click`（点击）、`attached`（加载完成）等，并关联对应的处理脚本。 |

### 5.2 外部资源引用

| 属性 | 值类型 | 默认值 | 说明 |
|------|--------|--------|------|
| `toolTip` | String/Array | - | 设置悬停提示。可以是字符串数组（如 `['提示1', '提示2']`），也可以是外部提示文件的路径（.yml）。 |
| `contextMenu` | String | - | 设置右键点击控件时弹出的上下文菜单，引用外部菜单配置文件（.yml）。 |

## 六、属性使用示例

### 基础标识示例：
```yaml
- !Grid
  name: 主面板
  identifier: main_panel
  id: 1001
```

### 布局与尺寸示例：
```yaml
- !Button
  name: 确认按钮
  width: 120
  height: 40
  horizontalAlign: Center
  verticalAlign: Center
  margin: "10, 0, 10, 0"
```

### 外观样式示例：
```yaml
- !TextBlock
  name: 标题文本
  background: 0x80000000
  foreground: 0xFFFFFFFF
  opacity: 0.9
  zIndex: 10
```

### 交互行为示例：
```yaml
- !Button
  name: 交互按钮
  clickable: true
  longClickable: true
  draggable: false
  clickSound: "ui/click.ogg"
  events:
    click: |-
      Chat.send("按钮被点击了！")
```

## 七、最佳实践建议

1. **命名规范**：为需要通过脚本控制的控件设置有意义的 `name` 属性
2. **相对布局优先**：尽量使用对齐和边距进行布局，避免使用绝对定位
3. **性能考虑**：合理使用变换效果，避免过度复杂的层级结构
4. **交互反馈**：为重要交互控件添加声音和视觉反馈

> 熟练掌握这些公共属性，可以更灵活地控制和定制UI控件的外观与行为。