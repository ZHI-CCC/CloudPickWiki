---
title: 控件画刷
date: 2099-03-05 21:25:02
permalink: /ui/控件画刷
categories:
  - UI界面
tags:
  - UI界面
---
# 控件画刷

> 定义UI控件外观样式的核心机制

⚠️ **阅读前提示**  
请确保已阅读 **[结构详解 | 新手教程]** 中的基础概念。

画刷（Brush）是用于定义 UI 控件外观样式的核心机制，比如控件的背景、边框、填充等区域的显示效果。通过画刷，你可以实现：纯色填充、图片背景、渐变色彩、动画效果、九宫格拉伸、状态切换样式等丰富的视觉表现。

## 一、画刷的公有属性（所有画刷类型通用）

所有画刷类型都支持以下两个基础属性，用于控制显示区域与透明度。

### 属性说明：

| 属性名 | 类型/取值 | 说明 |
|--------|-----------|------|
| `bounds` | x,y,width,height | 设置画刷的显示范围，格式为：左,上,宽,高（单位：像素） |
| `alpha` | 0 ~ 255 | 设置画刷的透明度，0为完全透明，255为完全不透明 |

## 二、基础用法概览

画刷可通过多种方式进行定义和使用，常见于控件的 `background`、`borderBrush` 等属性中。

### 1. 简化写法（直接使用颜色值或图片路径）

适用于快速设置背景色或图片背景，无需显式声明画刷类型。

#### 示例：
```yaml
# 纯色背景（ARGB格式）
background: 0xFFFF0000           # 红色背景

# 静态图片背景
background: texture://button.png

# 动态图片背景（GIF/APNG）
background: texture://anim.gif

# 序列帧背景（组合多个画刷，格式：图片路径,持续时间|...）
background: 'texture://frame1.png,100|texture://frame2.png,200'
```

> ✅ 优点：代码简洁，适合快速原型或静态样式  
> ⚠️ 缺点：无法配置透明度和复杂效果

### 2. 展开式写法（明确指定画刷类型）

使用 `!<画刷类型>` 显式声明你要使用的画刷，可配置更多参数。

#### 示例 —— 纯色画刷：
```yaml
background: !ColorBrush
  color: 0xFFFF0000    # 颜色值（ARGB）
  alpha: 200           # 透明度
```

### 3. 嵌套式写法（画刷中嵌套其它画刷）

你可以在一个画刷中嵌套另一个画刷，比如对图片进行缩放、剪裁、叠加等处理。

#### 示例 —— 图片缩放画刷：
```yaml
background: !ScaleBrush
  brush: !ImageBrush
    source: texture://icon.png
    alpha: 255
  scaleWidth: 20
  scaleHeight: 20
```

## 三、各类画刷详解

### 1. 🟥 颜色画刷（ColorBrush）

#### 功能说明：
最基础的画刷类型，用于为控件填充单一的纯色背景。

#### 适用场景：
按钮默认色、面板底色、简单色块等。

#### 参数：

| 参数名 | 类型 | 说明 |
|--------|------|------|
| `color` | ARGB 或 RGB | 颜色值，如 `0xFFFF0000` 表示不透明白色背景的红色 |
| `alpha` | 0~255 | 透明度，默认 255（不透明） |

#### 示例：
```yaml
background: !ColorBrush
  color: 0xFF3498DB    # 蓝色
  alpha: 255
```

### 2. 🖼️ 图片画刷

#### （1）静态图片画刷（ImageBrush）

##### 功能说明：
加载一张静态图片作为控件背景或填充。

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `source` | 图片路径，使用格式：`texture://文件名.png` |
| `alpha` | 透明度 |

##### 示例：
```yaml
background: !ImageBrush
  source: texture://ui/button.png
  alpha: 200
```

#### （2）动态图片画刷（AnimatedImageBrush）

##### 功能说明：
支持 GIF / APNG 等动态图片，可实现动画背景效果。

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `source` | 动图路径，如 `texture://fire.gif` |
| `oneShot` | 是否只播放一次（true/false） |

##### 示例：
```yaml
background: !AnimatedImageBrush
  source: texture://animations/fire.gif
  oneShot: true
```

#### （3）九宫格画刷（NinePatchBrush）

##### 功能说明：
通过指定图片的不拉伸边界，实现对 UI 元素（如按钮、面板）的自适应拉伸，避免中间内容被不合理拉扯。

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `source` | 图片路径 |
| `border` | 格式为：左,上,右,下，表示四周不拉伸的区域宽度（单位：像素） |

##### 示例：
```yaml
background: !NinePatchBrush
  source: texture://ui/panel.9.png
  border: 2,4,2,4
```

#### （4）自定义宫格画刷（CustomPatchBrush）

##### 功能说明：
更灵活的宫格切割方案（具体实现依赖引擎支持）。

##### 示例：
```yaml
background: !CustomPatchBrush
  source: texture://custom_ui.png
```

### 3. 🌈 渐变画刷

通过多个颜色节点，在一定方向上实现颜色的平滑过渡。

#### （1）线性渐变（LinearGradientBrush）

##### 功能说明：
从起始点到结束点之间，按设定色标进行线性插值渐变。

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `startPoint` | 渐变起始点，如 `0.5,0.5`（相对坐标 0~1） |
| `endPoint` | 渐变结束点 |
| `gradientStops` | 渐变色标数组，每个包含 `color` 和 `offset`（0.0 ~ 1.0） |

##### 示例：
```yaml
background: !LinearGradientBrush
  startPoint: 0.5,0.5
  endPoint: 0.1,0.9
  gradientStops:
    - color: 0xFFFF0000
      offset: 0.0
    - color: 0xFFFFFF00
      offset: 0.5
    - color: 0xFF0000FF
      offset: 1.0
```

#### （2）径向渐变（RadialGradientBrush）

##### 功能说明：
以某一点为中心，按径向（圆形）方式渐变。

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `center` | 圆心坐标 |
| `radius` | 渐变半径 |
| `gradientStops` | 渐变色标 |

##### 示例：
```yaml
background: !RadialGradientBrush
  center: 0.5,0.5
  radius: 0.8
  gradientStops:
    - color: 0xFFFF0000
      offset: 0.0
    - color: 0x00000000
      offset: 1.0
```

#### （3）角向渐变（AngularGradientBrush）

##### 功能说明：
以某点为中心，按角度方向进行渐变色过渡。

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `center` | 中心点 |
| `angle` | 渐变起始角度（°） |
| `gradientStops` | 渐变色标 |

##### 示例：
```yaml
background: !AngularGradientBrush
  center: 0.5,0.5
  angle: 45
  gradientStops:
    - color: 0xFFFF0000
      offset: 0.0
    - color: 0xFFFFFF00
      offset: 1.0
```

### 4. 🎭 状态画刷（StateBrush / ColorStateBrush）

> 根据控件当前状态（如 Hovered、Pressed、Disabled）自动切换不同的画刷或颜色，非常适合做动态按钮、交互反馈。

#### （1）状态画刷（StateBrush）

##### 功能说明：
根据控件状态切换不同的画刷类型（如图片、颜色、渐变等）

##### 参数：

| 参数名 | 说明 |
|--------|------|
| `brushs` | 列表，每个元素包含 `states`（状态数组）和 `brush`（对应画刷） |

##### 示例：
```yaml
background: !StateBrush
  brushs:
    - states: [Pressed]
      brush: texture://btn_pressed.png
    - states: [Hovered]
      brush: texture://btn_hover.png
    - states: [Normal]
      brush: texture://btn_normal.png
```

#### （2）颜色状态画刷（ColorStateBrush）

##### 功能说明：
根据状态切换不同的颜色

##### 示例：
```yaml
background: !ColorStateBrush
  brushs:
    - states: [Pressed]
      color: 0xFFAA0000
    - states: [Hovered]
      color: 0xFFFF6600
    - states: [Normal]
      color: 0xFF336699
```

## 四、高级 & 特效画刷

> 以下画刷提供更高级的视觉或变形能力

| 画刷类型 | 功能简述 | 是否可用 |
|----------|----------|----------|
| `ScaleBrush` | 对指定画刷进行缩放 | ✅ |
| `ClipBrush` | 垂直/水平方向剪裁 | ✅ |
| `RegionClipBrush` | 指定矩形区域剪裁 | ✅ |
| `InsetBrush` | 为画刷添加内边距效果 | ✅ |
| `SequenceFrameBrush` | 播放一组图片帧，支持每帧设置时长 | ✅ |
| `ShapeBrush` | 绘制基础形状（如矩形），可设置描边填充 | ✅ |
| `SpriteBrush` / `VectorBrush` / `VisualBrush` / `DrawingBrush` / `ShaderBrush` | 更高级图形、矢量、自定义绘制、着色器等 | ⚠️ 敬请期待 |

## 五、使用示例：按钮多状态背景设置

```yaml
- !Button
  text: "点击我"
  unHoveredBackground: !StateBrush
    brushs:
      - states: [Normal]
        brush: 0xFF3498DB
      - states: [Hovered]
        brush: 0xFF2980B9
      - states: [Pressed]
        brush: 0xFF21618C
  hoveredBackground: !ColorStateBrush
    brushs:
      - states: [Normal]
        color: 0xFFFFFFFF
      - states: [Disabled]
        color: 0xFFBDC3C7
```

> ✅ 效果：按钮在不同状态下显示不同颜色背景，提升交互体验

## 六、画刷选择指南

| 画刷类型 | 适用场景 | 特点 |
|---------|----------|------|
| **ColorBrush** | 纯色背景、简单色块 | 性能最佳，代码简洁 |
| **ImageBrush** | 图片背景、纹理填充 | 视觉效果丰富 |
| **NinePatchBrush** | 按钮、面板等需要拉伸的UI | 保持边角不变形 |
| **LinearGradientBrush** | 现代化背景、特殊效果 | 色彩过渡自然 |
| **StateBrush** | 交互按钮、状态反馈 | 自动状态切换 |

> 合理组合使用画刷，可以创建出视觉效果丰富、交互体验优秀的用户界面。