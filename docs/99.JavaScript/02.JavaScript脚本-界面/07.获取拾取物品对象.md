---
title: 获取拾取物品对象
date: 2099-03-05 21:25:02
permalink: /js/获取拾取物品对象
categories:
  - 脚本
tags:
  - 脚本
---
# 获取拾取物品对象

这是一个全局性的UI事件，当玩家在游戏中从地面上拾取任何物品时，该事件就会被触发。通过监听此事件，您可以在UI层面捕获到玩家的拾取行为，并获取到所拾取物品的详细信息。

## 🤖 API 详解与脚本示例

### 核心机制
| 组件 | 类型 | 说明 |
| :--- | :--- | :--- |
| **`events.listener` `itemPickUp(event)`** | UI端事件监听器 | 在任何UI控件的 `events` 块中定义 `listener` 事件。当玩家拾取物品时，系统会自动调用名为 **`itemPickUp`** 的函数。 |

### 示例代码
下面的示例展示了如何在一个控件中监听物品拾取事件，并获取到被拾取的物品对象。

```yaml
- !TextBlock
  name: pickupLogger
  events:
    listener: |
      function itemPickUp(event) {
        // 当玩家拾取物品时，此函数会自动执行
        
        // 通过 event.getItemStack() 方法获取拾取的物品对象
        var itemStack = event.getItemStack();
        
        // 'itemStack' 是一个包含了物品所有数据的对象
        // 你可以进一步操作它，例如读取它的ID, 数量, NBT等
        // (具体可访问的属性取决于API)
        
        // 示例：在聊天框打印消息，表示已捕获到事件
        Chat.send("你拾取了一个物品！");
        
        // 示例：更新UI文本来显示拾取信息
        pickupLogger.text = "刚刚拾取了物品。";
      }
```

### 🔍 说明
1.  **事件触发**：当玩家角色在世界中接触并拾取一个掉落物时，`itemPickUp` 事件被触发。
2.  **函数调用**：任何订阅了 `listener` 的UI控件都会执行其内部的 `itemPickUp(event)` 函数。
3.  **获取数据**：`event` 对象是此次事件的载体，通过调用其 `getItemStack()` 方法，可以获得一个代表所拾取物品的 `ItemStack` 对象。
4.  **后续操作**：拿到 `itemStack` 对象后，您可以进行各种逻辑处理，例如更新UI上的物品显示、记录玩家拾取的物品日志、或者触发其他UI动画效果等。