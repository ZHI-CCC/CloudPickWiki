---
title: ä½¿ç”¨è„šæœ¬æ§åˆ¶æ§ä»¶
date: 2099-03-05 21:25:02
permalink: /js/ä½¿ç”¨è„šæœ¬æ§åˆ¶æ§ä»¶
categories:
  - è„šæœ¬
tags:
  - è„šæœ¬
---
# ä½¿ç”¨è„šæœ¬æ§åˆ¶æ§ä»¶

åœ¨UIå¼€å‘ä¸­ï¼Œé™¤äº†åœ¨YAMLæ–‡ä»¶ä¸­é™æ€å®šä¹‰å¸ƒå±€å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡JavaScriptè„šæœ¬åŠ¨æ€åœ°åˆ›å»ºã€æ·»åŠ ã€ç§»é™¤å’Œè®¿é—®UIæ§ä»¶ã€‚è¿™ä¸ºå®ç°åŠ¨æ€åˆ—è¡¨ã€æ¡ä»¶æ€§æ˜¾ç¤ºå†…å®¹ä»¥åŠå¤æ‚çš„äº¤äº’é€»è¾‘æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚

æ‰€æœ‰å®¹å™¨ç±»å‹çš„æ§ä»¶ï¼ˆå¦‚ `Grid`, `StackPanel` ç­‰ï¼‰éƒ½æ”¯æŒåŠ¨æ€ç®¡ç†å…¶å­æ§ä»¶ã€‚

## ğŸ¤– API è¯¦è§£ä¸è„šæœ¬ç¤ºä¾‹
ä»¥ä¸‹APIå’Œç¤ºä¾‹é€šå¸¸åœ¨æ§ä»¶çš„ `events` è„šæœ¬å—ä¸­ä½¿ç”¨ã€‚

### æ ¸å¿ƒæ–¹æ³•
| æ–¹æ³• | è¯´æ˜ |
| :--- | :--- |
| **`new ControlType()`** | **å®ä¾‹åŒ–æ§ä»¶**ã€‚é€šè¿‡ `new` å…³é”®å­—å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ§ä»¶å®ä¾‹ï¼Œä¾‹å¦‚ `new Image()` æˆ– `new TextBlock()`ã€‚ |
| **`container.addView(child)`** | **æ·»åŠ å­æ§ä»¶**ã€‚å°†ä¸€ä¸ªæ§ä»¶å®ä¾‹ `child` æ·»åŠ åˆ°æŒ‡å®šçš„å®¹å™¨ `container` ä¸­ã€‚ |
| **`container.removeView(child)`** | **ç§»é™¤æŒ‡å®šå­æ§ä»¶**ã€‚ä»å®¹å™¨ `container` ä¸­ç§»é™¤æŒ‡å®šçš„å­æ§ä»¶å®ä¾‹ `child`ã€‚ |
| **`container.removeAllViews()`** | **ç§»é™¤æ‰€æœ‰å­æ§ä»¶**ã€‚æ¸…ç©ºå®¹å™¨ `container` å†…çš„æ‰€æœ‰å­æ§ä»¶ã€‚ |
| **`container.getChildren()`** | **è·å–å­æ§ä»¶åˆ—è¡¨**ã€‚è¿”å›ä¸€ä¸ªåŒ…å«è¯¥å®¹å™¨æ‰€æœ‰å­æ§ä»¶çš„åˆ—è¡¨å¯¹è±¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `.get(index)` æ¥è®¿é—®ç‰¹å®šä½ç½®çš„å­æ§ä»¶ã€‚ |
| **`control.xxxx()`** | **è·å–æ§ä»¶å±æ€§**ã€‚è·å–`control`æ§ä»¶çš„`xxxx`å±æ€§çš„å€¼ã€‚ |

### ç»¼åˆç¤ºä¾‹
ä¸‹é¢çš„ä»£ç åœ¨ä¸€ä¸ª `Grid` å®¹å™¨çš„ `attached` äº‹ä»¶ä¸­ï¼Œæ¼”ç¤ºäº†å¦‚ä½•åŠ¨æ€åˆ›å»ºã€é…ç½®ã€æ·»åŠ å’Œç§»é™¤å„ç§æ§ä»¶ã€‚

```yaml
- !Grid
  # ä¸ºè¯¥Gridå‘½åï¼Œä»¥ä¾¿åœ¨è„šæœ¬ä¸­é€šè¿‡åå­—è®¿é—®å®ƒ
  name: grid
  events:
    attached: |
      // --- 1. åˆ›å»ºå¹¶é…ç½®ä¸€ä¸ªImageæ§ä»¶ ---
      var image = new Image();  // å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„Imageæ§ä»¶
      
      // è®¾ç½®å…¶å¸ƒå±€å’Œæ ·å¼å±æ€§
      image.horizontalAlign = 'Right';
      image.verticalAlign = 'Bottom';
      image.width = 100;
      image.source = "texture://gh_.png";
      
      // å¯ä»¥ç›´æ¥è®¾ç½®å¤–è¾¹è·
      image.marginRight = 20;  // å³è¾¹è·20
      image.marginBottom = 30; // åº•è¾¹è·30
      
      // åŠ¨æ€åœ°ä¸ºæ–°æ§ä»¶ç»‘å®šäº‹ä»¶
      image.events.click = () => {
	      // ç‚¹å‡»å›¾ç‰‡åï¼Œå°†å…¶é«˜åº¦ä¹Ÿè®¾ç½®ä¸º100
	      self.height = 100;
      };
      
      // --- 2. æ·»åŠ å’Œç§»é™¤å•ä¸ªæ§ä»¶ ---
      // self åœ¨è¿™é‡Œä»£è¡¨å½“å‰çš„Gridå®¹å™¨
      self.addView(image);      // å°†åˆ›å»ºå¥½çš„å›¾ç‰‡æ·»åŠ åˆ°Gridä¸­
      // self.removeView(image); // å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥éšæ—¶ç§»é™¤å®ƒ

      // --- 3. åˆ›å»ºå®¹å™¨å¹¶æ‰¹é‡æ·»åŠ æ§ä»¶ ---
      var stackPanel = new StackPanel(); // å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å †å å®¹å™¨
      stackPanel.orientation = 'Horizontal'; // è®¾ç½®ä¸ºæ°´å¹³æ’åˆ—
      stackPanel.background = 'Red';         // è®¾ç½®èƒŒæ™¯ä¸ºçº¢è‰²ä»¥ä¾¿è§‚å¯Ÿ
      
      // ç”šè‡³å¯ä»¥å°†è¢«ç§»é™¤çš„ image æ·»åŠ åˆ°è¿™ä¸ªæ–°çš„å®¹å™¨ä¸­
      stackPanel.addView(image);
      
      // ä½¿ç”¨å¾ªç¯æ‰¹é‡åˆ›å»ºå¹¶æ·»åŠ TextBlockæ§ä»¶
      for(let i = 0; i < 5; i++){
        var textBlock = new TextBlock();
        textBlock.text = 'text' + i;
        stackPanel.addView(textBlock);
      }
      
      // --- 4. å°†å®¹å™¨æ·»åŠ åˆ°ä¸»è§†å›¾ä¸­ ---
      // ä½¿ç”¨ name æ¥å¼•ç”¨æ ¹Gridï¼Œç„¶åå°†åˆšåˆ›å»ºçš„stackPanelæ·»åŠ è¿›å»
      grid.addView(stackPanel);
      
      // --- 5. è®¿é—®å’Œæ¸…ç©ºå­æ§ä»¶ ---
      // è·å–gridçš„ç¬¬ä¸€ä¸ªå­æ§ä»¶ (è¿™é‡Œå°±æ˜¯æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„stackPanel)
      var firstChild = grid.getChildren().get(0);
      
      // ç§»é™¤gridå†…çš„æ‰€æœ‰å­æ§ä»¶
      // grid.removeAllViews();
```