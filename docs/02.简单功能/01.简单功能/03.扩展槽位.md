---
title: æ‰©å±•æ§½ä½
date: 2099-03-05 21:25:02
permalink: /simplefunction/æ‰©å±•æ§½ä½
categories:
  - ç®€å•åŠŸèƒ½
tags:
  - ç®€å•åŠŸèƒ½
---
# æ‰©å±•æ§½ä½

## ğŸ’¡ åŠŸèƒ½ç®€ä»‹

è¯¥åŠŸèƒ½å…è®¸æ‚¨ä¸ºç©å®¶çš„ç‰©å“æ åˆ›å»ºå…¨æ–°çš„ã€è‡ªå®šä¹‰çš„æ‰©å±•æ§½ä½ã€‚æ›´è¿›ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªæ§½ä½è®¾å®šç²¾ç»†çš„è§„åˆ™ï¼Œç²¾ç¡®åœ°é™åˆ¶å“ªäº›ç‰©å“ã€åœ¨ä½•ç§æ¡ä»¶ä¸‹æ‰èƒ½è¢«æ”¾å…¥ã€‚

## ğŸ“ é…ç½®æ–‡ä»¶

æ‰€æœ‰æ‰©å±•æ§½ä½ç›¸å…³çš„è®¾ç½®å‡åœ¨ `config/SlotConfig.yml` æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚

## âš™ï¸ é…ç½®ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºç¡€çš„æ§½ä½é…ç½®ï¼Œå±•ç¤ºäº†å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ§½ä½åŠå…¶é™åˆ¶æ¡ä»¶ã€‚

```yaml
# æ‰€æœ‰è‡ªå®šä¹‰çš„æ§½ä½éƒ½å¿…é¡»åœ¨æ­¤å¤„è¿›è¡Œå®šä¹‰ï¼Œå¦åˆ™å®ƒä»¬å°†æ— æ³•åœ¨æ¸¸æˆå†…è¿›è¡Œäº¤äº’ã€‚
é¢å¤–æ§½ä½1: # è¿™æ˜¯æ§½ä½çš„å”¯ä¸€IDï¼Œä¸å¯é‡å¤!
  # å…¼å®¹æ€§è®¾ç½®
  # attribute: å†³å®šæ­¤æ§½ä½ä¸­çš„ç‰©å“æ˜¯å¦èƒ½æ¿€æ´»å±æ€§ç³»ç»Ÿã€‚è®¾ç½®ä¸º true åˆ™å…¼å®¹ã€‚
  attribute: true
  # skin: å†³å®šæ­¤æ§½ä½ä¸­çš„ç‰©å“æ˜¯å¦èƒ½ä½œä¸ºæ—¶è£…æ˜¾ç¤ºã€‚è®¾ç½®ä¸º true åˆ™å…¼å®¹ã€‚
  skin: true

  # è‡ªå®šä¹‰æ§½ä½æ”¾å…¥é™åˆ¶
  # è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç©å®¶æ”¾å…¥ç‰©å“æ—¶ï¼Œå¿…é¡»æ»¡è¶³åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ¡ä»¶ã€‚
  limit:
    # --- å†…ç½®æ¡ä»¶ç¤ºä¾‹ ---
    # æ ¼å¼: "æ¡ä»¶å|å‚æ•°"
    
    # lore|åŠå 
    # è¦æ±‚ç‰©å“çš„ Lore (æè¿°) ä¸­å¿…é¡»æœ‰ä¸€è¡Œä¸ "åŠå " å®Œå…¨ç›¸åŒã€‚
    - "lore|åŠå "
    
    # permission|essentials.use
    # è¦æ±‚ç©å®¶å¿…é¡»æ‹¥æœ‰ "essentials.use" è¿™ä¸ªæƒé™æ‰èƒ½æ”¾å…¥ç‰©å“ã€‚
    - "permission|essentials.use"
    
    # --- æ›´å¤šå†…ç½®æ¡ä»¶è¯´æ˜ ---
    # lorecontains|xxx : é™åˆ¶ç‰©å“çš„æŸä¸€è¡Œ Lore å¿…é¡»åŒ…å« "xxx" æ–‡æœ¬ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ã€‚
    # skin|xxx : é™åˆ¶ç‰©å“çš„æ—¶è£…ç±»å‹å¿…é¡»æ˜¯ "xxx"ã€‚è‹¥ "xxx" ä¸º "*"ï¼Œåˆ™è¡¨ç¤ºä»»ä½•æ—¶è£…éƒ½å¯ä»¥æ”¾å…¥ (éœ€è¦é¾™ä¹‹æ—¶è£…ä»˜è´¹ç‰ˆ)ã€‚
    # emptyslot|xxx : é™åˆ¶åªæœ‰å½“ ID ä¸º "xxx" çš„æ§½ä½ä¸ºç©ºæ—¶ï¼Œå½“å‰æ§½ä½æ‰èƒ½æ”¾å…¥ç‰©å“ï¼Œå¯ç”¨äºåˆ¶ä½œäº’æ–¥æ§½ä½ã€‚
```

---

## ğŸ“œ é™åˆ¶æ¡ä»¶è„šæœ¬

å¯¹äºæœ‰æ›´é«˜è‡ªå®šä¹‰éœ€æ±‚çš„ç”¨æˆ·ï¼Œæ’ä»¶æä¾›äº†å¼ºå¤§çš„è„šæœ¬åŠŸèƒ½ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–å†™ JavaScript ä»£ç æ¥åˆ›å»ºå…¨æ–°çš„ã€å®Œå…¨è‡ªå®šä¹‰çš„é™åˆ¶æ¡ä»¶ã€‚

> ğŸ’¡ **æç¤º**: æ­¤åŠŸèƒ½éœ€è¦æ‚¨å…·å¤‡ä¸€å®šçš„ JavaScript åŸºç¡€ã€‚æ¨èå‚è€ƒæ•™ç¨‹ï¼š[JavaScript æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/js/js-tutorial.html)

ä»¥ä¸‹æ˜¯æ’ä»¶å†…ç½®çš„é™åˆ¶æ¡ä»¶è„šæœ¬ï¼Œæ‚¨å¯ä»¥å‚è€ƒå®ƒä»¬çš„å®ç°æ–¹å¼æ¥ç¼–å†™è‡ªå·±çš„é€»è¾‘ã€‚

```javascript
// Script éƒ¨åˆ†åŒ…å«äº†æ‰€æœ‰é™åˆ¶æ¡ä»¶çš„å…·ä½“å®ç°é€»è¾‘ã€‚
Script:
  // lorecontains: ç”¨äºåˆ¤æ–­ç‰©å“çš„æŸè¡Œ lore é‡Œæ˜¯å¦åŒ…å«äº†æŒ‡å®šæ–‡æœ¬
  lorecontains: |-
    function execute(player, itemStack, slotIdentifier, limitString){
      limitString = limitString.replaceAll("&","Â§");
      var lore = itemStack.getItemMeta().getLore();
      if(lore!=null){
        for(var i=0;i<lore.size();i++){
          var line = lore.get(i).replaceAll(" ","");
          if(line!=null && line.contains(limitString)){
             return true;
          }
        }
      }
      player.sendMessage("Â§cè¿›ä¸å»!Â§bæ€ä¹ˆæƒ³éƒ½è¿›ä¸å»å§!Â§6è¦Â§5"+limitString+"Â§6æ‰èƒ½è¿›å»!Â§8(æ§½ä½ä¸ç‰©å“ä¸ç¬¦)");
      return false;
    }
    
  // lore: ç”¨äºåˆ¤æ–­ç‰©å“æ˜¯å¦æœ‰ä¸€è¡Œ lore ä¸æŒ‡å®šæ–‡æœ¬å®Œå…¨ç›¸åŒ
  lore: |-
    function execute(player, itemStack, slotIdentifier, limitString){
      limitString = limitString.replaceAll("&","Â§");
      var lore = itemStack.getItemMeta().getLore();
      var result = lore != null && lore.contains(limitString);
      if(!result){
      player.sendMessage("Â§cè¯¥æ§½ä½éœ€è¦Lore: "+limitString);
      }
      return result;
    }
    
  // permission: ç”¨äºåˆ¤æ–­ç©å®¶æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæƒé™
  permission: |-
    function execute(player, itemStack, slotIdentifier, limitString){
      var result = player.hasPermission(limitString);
      if(!result){
      player.sendMessage("Â§cè¿›ä¸å»!Â§bæ€ä¹ˆæƒ³éƒ½è¿›ä¸å»å§!Â§6è¦Â§5"+limitString+" Â§6æƒé™æ‰èƒ½è®©ä½ è¿›å»Â§8(ç¼ºå°‘å¿…è¦æƒé™)")
      }
      return result;
    }
    
  // skin: ç”¨äºåˆ¤æ–­ç©å®¶æ”¾å…¥çš„æ—¶è£…ç±»å‹æ˜¯å¦åŒ¹é…
  skin: |-
    function execute(player, itemStack, slotIdentifier, limitString) {
        var itemSkinType = DragonAPI.static.getItemSkinType(itemStack);
        if (itemSkinType != null) {
            itemSkinType = itemSkinType.toLowerCase();
        }
        var result = (itemSkinType === limitString) || (itemSkinType != null && limitString=="*");
        if (!result) {
            player.sendMessage("Â§cå½“å‰æ§½ä½éœ€è¦æ—¶è£…ç±»å‹: Â§f" + limitString + "Â§c  ä½ æ”¾å…¥çš„ç‰©å“æ—¶è£…ç±»å‹æ˜¯: Â§f" + itemSkinType);
        }
        return result;
    }
    
  // emptyslot: ç”¨äºåˆ¤æ–­å…¶ä»–æŒ‡å®šæ§½ä½æ˜¯å¦ä¸ºç©º
  emptyslot: |-
    function execute(player, itemStack, slotIdentifier, limitString) {
        var item = SlotAPI.static.getCacheSlotItem(player,limitString);
        var result = item == null || item.getType().toString() == "AIR";
        if(!result){
            if(limitString=="é¢å¤–æ§½ä½1"){
               limitString = "åŠå æ§½ä½"; // å¯ä»¥å°†æ§½ä½IDè½¬æ¢ä¸ºä¸­æ–‡åæç¤ºç»™ç©å®¶
            }
            player.sendMessage("Â§cè¿›ä¸å»!Â§bæ€ä¹ˆæƒ³éƒ½è¿›ä¸å»å§!Â§5" + limitString + "Â§6å·²ç»è¿›å»äº†!Â§8(æ‚¨ä¸èƒ½åŒæ—¶åœ¨ä¸¤ä¸ªæ§½ä½å†…æ”¾ç½®ç‰©å“)");
        }
        return result;
    }
    
  // applyVanilla: (è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è„šæœ¬ï¼Œé€šå¸¸ä¸ç”¨äºé™åˆ¶) ç”¨äºå°†ç‰©å“åº”ç”¨åˆ°åŸç‰ˆæ§½ä½ï¼Œä¾‹å¦‚æ”¾å…¥æ‰©å±•æ§½ä½çš„ç‰©å“åŒæ—¶åœ¨ç©å®¶å¤–è§‚çš„å‰¯æ‰‹æˆ–ç›”ç”²ä½ç½®æ˜¾ç¤ºã€‚
  applyVanilla: |-
    function execute(player, itemStack, slotIdentifier, limitString) {
      // æ­¤è„šæœ¬é€»è¾‘ä¸ºï¼šæ£€æŸ¥ç‰©å“Loreæ˜¯å¦åŒ…å«limitStringï¼Œå¦‚æœåŒ…å«ï¼Œå°±å°†è¯¥ç‰©å“è®¾ç½®åˆ°ç©å®¶çš„å‰¯æ‰‹ã€‚
      var result = false;
      limitString = limitString.replaceAll("&","Â§");
      var lore = itemStack.getItemMeta().getLore();
      if(lore!=null){
        for(var i=0;i<lore.size();i++){
          var line = lore.get(i).replaceAll(" ","");
          if(line!=null && line.contains(limitString)){
             result = true;
             break; // æ‰¾åˆ°åå³å¯é€€å‡ºå¾ªç¯
          }
        }
      }
      if(result){
        player.getInventory().setItemInOffHand(itemStack);   // è®¾ç½®å‰¯æ‰‹
      }
      return result; // é€šå¸¸è¿”å›trueä»¥ç¡®ä¿æ“ä½œæˆåŠŸ
    }
```

---

## ğŸš€ å¦‚ä½•æ‰©å±•æ–°çš„é™åˆ¶æ¡ä»¶ï¼Ÿ

è¦æ·»åŠ è‡ªå®šä¹‰çš„æ§½ä½é™åˆ¶æ¡ä»¶ï¼Œæ‚¨éœ€è¦éµå¾ªä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š

### ç¬¬ä¸€æ­¥ï¼šåœ¨ `Script` éƒ¨åˆ†å®šä¹‰æ–°çš„æ¡ä»¶è„šæœ¬

åœ¨ `SlotConfig.yml` çš„ `Script` éƒ¨åˆ†ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„é”®å€¼å¯¹ã€‚é”®å°±æ˜¯æ‚¨è‡ªå®šä¹‰çš„é™åˆ¶æ¡ä»¶åç§°ï¼ˆä¾‹å¦‚ `namecontains`ï¼‰ï¼Œå€¼å°±æ˜¯å¯¹åº”çš„ JavaScript ä»£ç ã€‚

```yaml
Script:
  # ... (ä¿ç•™åŸæœ‰çš„ lore, permission ç­‰) ...

  # æ–°å¢ä¸€ä¸ªç”¨äºæ£€æµ‹ç‰©å“åç§°æ˜¯å¦åŒ…å«æŒ‡å®šæ–‡å­—çš„æ¡ä»¶
  namecontains: |-
    function execute(player, itemStack, slotIdentifier, limitString){
      // è„šæœ¬é€»è¾‘å°†å†™åœ¨è¿™é‡Œ
    }
```

### ç¬¬äºŒæ­¥ï¼šç¼–å†™ JavaScript é€»è¾‘

åœ¨æ–°å¢çš„ `namecontains` æ¡ä»¶ä¸‹ï¼Œå®Œå–„ `execute` å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨ç©å®¶å°è¯•æ”¾å…¥ç‰©å“æ—¶è¢«è°ƒç”¨ï¼Œå®ƒå¿…é¡»è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼š`true` ä»£è¡¨å…è®¸æ”¾å…¥ï¼Œ`false` ä»£è¡¨ç¦æ­¢æ”¾å…¥ã€‚

**`execute` å‡½æ•°çš„å‚æ•°è¯¦è§£ï¼š**

*   `player`: æ­£åœ¨æ“ä½œçš„ç©å®¶å¯¹è±¡ã€‚
*   `itemStack`: ç©å®¶å°è¯•æ”¾å…¥çš„ç‰©å“å¯¹è±¡ã€‚
*   `slotIdentifier`: ç›®æ ‡æ§½ä½çš„ ID (ä¾‹å¦‚ "é¢å¤–æ§½ä½1")ã€‚
*   `limitString`: åœ¨æ§½ä½ `limit` é…ç½®ä¸­ï¼Œ`|` åé¢çš„å‚æ•°å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ï¼š** ç¼–å†™ä¸€ä¸ªæ£€æŸ¥ç‰©å“æ˜¾ç¤ºåç§°æ˜¯å¦åŒ…å«ç‰¹å®šæ–‡å­—çš„è„šæœ¬ã€‚

```javascript
  namecontains: |-
    function execute(player, itemStack, slotIdentifier, limitString){
      // é¦–å…ˆï¼Œæ£€æŸ¥ç‰©å“æ˜¯å¦æœ‰è‡ªå®šä¹‰æ˜¾ç¤ºåç§°
      if (!itemStack.getItemMeta().hasDisplayName()) {
        player.sendMessage("Â§cè¯¥ç‰©å“æ²¡æœ‰åç§°ï¼Œæ— æ³•æ”¾å…¥ï¼");
        return false; // æ²¡æœ‰åç§°ï¼Œç›´æ¥ç¦æ­¢
      }
      
      // è·å–ç‰©å“çš„æ˜¾ç¤ºåç§°
      var displayName = itemStack.getItemMeta().getDisplayName();
      
      // åˆ¤æ–­æ˜¾ç¤ºåç§°ä¸­æ˜¯å¦åŒ…å« limitString æ‰€æŒ‡å®šçš„æ–‡æœ¬
      if (displayName.contains(limitString)) {
        return true; // åŒ…å«ï¼ŒéªŒè¯é€šè¿‡ï¼Œå…è®¸æ”¾å…¥
      } else {
        // ä¸åŒ…å«ï¼Œå‘ç©å®¶å‘é€æç¤ºæ¶ˆæ¯ï¼Œå¹¶ç¦æ­¢æ”¾å…¥
        player.sendMessage("Â§cç‰©å“åç§°ä¸æ­£ç¡®ï¼éœ€è¦åŒ…å« 'Â§e" + limitString + "Â§c' å­—æ ·ã€‚");
        return false;
      }
    }
```

### ç¬¬ä¸‰æ­¥ï¼šåœ¨æ§½ä½é…ç½®ä¸­åº”ç”¨æ–°æ¡ä»¶

åœ¨æ‚¨æƒ³è¦åº”ç”¨æ­¤é™åˆ¶çš„æ§½ä½ä¸‹ï¼Œæ‰¾åˆ° `limit` åˆ—è¡¨ï¼Œå¹¶æ·»åŠ æ‚¨çš„æ–°æ¡ä»¶ã€‚æ ¼å¼ä¸º `æ¡ä»¶å|å‚æ•°`ã€‚

```yaml
é¢å¤–æ§½ä½2: # å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°çš„æ§½ä½
  attribute: true
  skin: false
  limit:
    # åº”ç”¨æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ namecontains æ¡ä»¶
    # è¦æ±‚æ”¾å…¥çš„ç‰©å“åç§°å¿…é¡»åŒ…å« "ç¥å™¨" è¿™ä¸¤ä¸ªå­—
    - "namecontains|ç¥å™¨"
    # è¿˜å¯ä»¥ä¸å…¶ä»–æ¡ä»¶ç»„åˆä½¿ç”¨
    - "permission|myplugin.use.artifact"
```